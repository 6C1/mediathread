{% extends "base.html" %}
{% load user_annotations tagging_tags smartif user_projects helpful_tags coursetags  comments collaborations %}

<title> {% block title %}
{% if space_owner == user %}
My Analysis > My Saved Items
{% else %}
Class Analysis > {% public_name for space_owner %}'s Analysis
{% endif %}
{% endblock %}</title>

{% block css %}
    {{ block.super }}
	<link rel="stylesheet" type="text/css" href="/site_media/css/home.css" />
{% endblock %}

{% block js %}
  <script type="text/javascript" src="/site_media/js/hs.js"></script>
  <script type="text/javascript" src="/site_media/js/ajaxDelete.js"></script>
  <script type="text/javascript" src="/site_media/js/tablesort.js"></script>
  <script type="text/javascript" src="/site_media/js/util.js"></script>
  
  {% if EXPERIMENTAL %}
  <script type="text/javascript" src="/site_media/js/slider.js"></script>
  {% endif %}
  
  <!--All the annotation javascript/css -->
  {% include "djangosherd/annotator_resources.html" %}
    
  <script type="text/javascript" src="/site_media/js/mustache/mustache.js"></script>
  <script type="text/javascript" src="/site_media/js/assetmgr/asset.js?v1"></script>
  <script type="text/javascript">
    DjangoSherd_Asset_Config();    
    {% if not mock %}
        AssetList.init({
            'user': { 'username': '{{request.user}}', 'public_name': '{% public_name for request.user %}' }
        });
    {% endif %}{# not mock #}    
  </script>
{% endblock %}

{% block content %}

  {{ block.super }}


  <table id="home-columns">
    <tbody>
    <tr>
      <td class="" id="instructor">
<div class="column-container">    
  {%if display.instructor or is_faculty %}
  
    <h2>From Your Instructor
        {% if is_faculty %}
        <a class="hs-control intro-open" href="#intro-instructor">?</a>
        {% endif %}
    </h2>
    <div class="column-contents scroll">

        {% if is_faculty %}
        <div id="intro-instructor" class="intro-text hs-init-{% if not display.instructor %}hide{% else %}show{% endif %}">
          <h3><a class="hs-control control-close" href="#intro-instructor">x</a>
            Welcome to MediaThread
          </h3>
          
           <h4>
        In MediaThread you can:
      </h4>

      <ul>
        <li>Browse Sources and choose Items for analysis</li>
        <li>Collect Items and annotate Selections</li>
        <li>Embed Selections into your Compositions</li>
      </ul>
      
         <h4>
        Your Instructor controls this space:
      </h4>
          <p>
            Information, Sources, Items, Assignments, and Discussions that s/he publishes for the class will appear in this column.</p>
          <!--
          
          <p>
            Information (Compositions), Sources, Items, Assignments, and Discussions that you create and publish to the class will appear here. If you do not publish Compositions to the class, this pane will not be visible to students.
            </p><p>     
            To learn more and get started, visit the Instructor Dashboard
          </p>-->
        </div>
        {% endif %}

        {%if faculty_feed.projects %}
            <ul class="instructor-list">
                {#not necessarily a project -- could be a discussion #}
            	{%for project in instructor_full_feed %}
                    {%if project.threadedcomment %}
                      {% with project as disc %}
                        <li id="discussion-{{disc.id}}" class="inst-item discussion">
                            <div class="actions">
                              {% if is_faculty %}
                              <a onclick="return ajaxDelete(this, 'discussion-{{disc.id}}')"
                                 href="{% url discussion-view disc.id %}?delete">
                              <img src="/site_media/img/Trashcan.gif"  class="delete_icon" alt="Remove this Discussion"  /></a>
                              {% endif %}
                            </div>
                            
                              <a href="/discussion/show/{{disc.id}}" class="title">{%firstof disc.title disc.content_object.title "Untitled" %}</a>
                              {% get_comment_count for disc.content_object as comment_count%}
                              ({{comment_count}})
                            
                        </li>
                      {%endwith%}
                    {%else%}
                    <div class="actions">
                              {% if is_faculty %}
                              <a onclick=""
                                 href="">
                              <img src="/site_media/img/Trashcan.gif"  class="delete_icon" alt="Remove from List"  /></a>
                              {% endif %}
                            </div>
                    <li class="inst-item {%if project.is_assignment_cached%}assignment{%else%}project{%endif%}"><a href="{{project.get_absolute_url}}">{{project.title}}</a></li>
                    
                    {%endif%}
	           {%endfor%}
            </ul>
        {%endif%}

    {%if faculty_feed.assets %}
     <h3>ITEMS OF INTEREST</h3>
      <ul>
	{%for a in faculty_feed.assets%}
	<li><a href="{{a.get_absolute_url}}">{{a.title}}</a></li>
	{%endfor%}
      </ul>
    {%endif%}

    {%if faculty_feed.tags %}
      <h3>PRIORITY TAGS</h3>
      <ul class="tags">
	{% for tag in faculty_feed.tags %}
	<li>
	  <span class="size{{tag.font_size}}">
	    <a href="{% url asset-container %}?tag={{tag.name}}">
	      {{tag.name}} 
	    </a>
	  </span>
	</li>
	{% endfor %}
      </ul>
    {%endif%}

    </div>


  </div>
  {%endif%}{#display.instructor#}

      </td>
      <td class="" id="media">
<div class="column-container" >
 <h2>
 {% if editable %}

  <div class="button-form inline">
   <form class="block media-browse hinline" method="POST" action="{%url your-space-projects user%}">
     <input type="hidden" name="title" />
     <input class="columnbutton media-browse-button" type="submit" value="Browse Sources"/>

   </form>

   </div>
{% endif %}
Collections
 </h2>
 <div class="column-contents scroll">
 
    <div id="asset_table"></div><!--  Replaced by Mustache :{ -->

   {% comment %} {% include "assetmgr/new_asset_table.html" %} {% endcomment %}
                
     
</div>
    </div>
      </td>

      <td class="" id="projects">
 <div class="column-container">
  <h2>
  {% if editable %}
        
          <div class="button-form inline">
           <form class="block project-createnew inline" method="POST" action="{%url your-space-projects user%}">
             <input type="hidden" name="title" />
             <input class="columnbutton project-createnew-button" type="submit" value="Create Composition"/>
        
           </form>
        
       </div>
        {% endif %}

  
  My Compositions
  </h2>
      <div class="column-contents scroll">
      
        {% include "projects/project_list_notable.html" %}
        </div>
        </div>
      </td>
      </tr>
  </tbody>
</table>

<script type="text/javascript">
    jQuery(document).ready(function() {
        var visible = getVisibleContentHeight();
        jQuery('.column-container').css('height', visible + "px");
    });
</script>
{% endblock %}
